---
title: "Robust exam 1"
author: "Zhong"
date: "2025-07-01"
output:
  word_document: default
  html_document: default
---
#compute mean ,median, trimmed mean
```{r}
data_1 <-c(110,115,120,122,125,130,135,140,145,300) 
mean_1 <- mean(data_1)
median_1 <- median(data_1)
trim_mean <- mean(data_1,trim=0.1)
mean_1
median_1
trim_mean
#ç®—SDï¼ŒMAD
sd(data_1)
mad(data_1, constant = 1)#é»˜è®¤ mad(x) ä¼šä¹˜ä¸Š 1.4826 è¿™ä¸ªå¸¸æ•°ç”¨äºŽè¿‘ä¼¼æ ‡å‡†å·®ï¼Œè¿™é‡Œæˆ‘ä»¬åŠ ä¸Š constant = 1 æ¥è¿˜åŽŸæœ€åŽŸå§‹ MADã€‚
mad(data_1)#è¿™ä¸ªæ˜¯

```
#The entry â€˜300â€™ is incorrect due to a typo error. Replace this with the correct value â€˜150â€™.
#Now add a new observation z to the corrected dataset. For ð‘§=200,400
#i. Compute the mean and median of the modified data set.

```{r}
data_2 <- c(110,115,120,122,125,130,135,140,145,150,200)
mean(data_2)
median(data_2)
data_3 <- c(110,115,120,122,125,130,135,140,145,150,400)
mean(data_3)
median(data_3)
```
##ii. Plot the sensitivity curves for the mean and the median. Comment on the resulting plots.
```{r}
# åŽŸå§‹æ•°æ®ï¼ˆä¿®æ­£åŽï¼‰
data_base <- c(110, 115, 120, 122, 125, 130, 135, 140, 145, 150)

# åŠ å…¥ z = 200
z <- 200
data_with_z <- c(data_base, z)

# åŽŸå§‹ä¼°è®¡é‡
base_mean <- mean(data_base)
base_median <- median(data_base)
base_mean
base_median
# åŠ å…¥åŽçš„ä¼°è®¡é‡
new_mean<- mean(data_with_z)
new_median <- median(data_with_z)
new_mean
new_median
# è®¡ç®— sensitivity
sc_mean <- new_mean - base_mean
sc_median <- new_median - base_median



```
#çº¿å›¾

```{r}
# åŽŸå§‹æ•°æ®ï¼ˆä¿®æ­£300ä¸º150ï¼‰
data_base <- c(110, 115, 120, 122, 125, 130, 135, 140, 145, 150)

# æž„é€  z çš„è¿žç»­å˜åŒ–åºåˆ—
z_vals <- seq(100, 500, by = 5)

# é¢„å…ˆè®¡ç®— base çš„ mean å’Œ median
base_mean <- mean(data_base)
base_median <- median(data_base)

# åˆ›å»ºç©ºå‘é‡ä¿å­˜ sensitivity å€¼
sc_mean <- numeric(length(z_vals))
sc_median <- numeric(length(z_vals))

# éåŽ†æ¯ä¸ª zï¼ŒåŠ å…¥åŽè®¡ç®— estimator çš„å˜åŒ–é‡
for (i in seq_along(z_vals)) {
  z <- z_vals[i]
  new_data <- c(data_base, z)
  sc_mean[i] <- mean(new_data) - base_mean
  sc_median[i] <- median(new_data) - base_median
}

# ç»˜å›¾
plot(z_vals, sc_mean, type = "l", col = "blue", lwd = 2,
     ylim = range(c(sc_mean, sc_median)),
     xlab = "z (new data point)", ylab = "Change in Estimator",
     main = "Sensitivity Curve for Mean and Median")
lines(z_vals, sc_median, col = "red", lwd = 2)
abline(h = 0, lty = 2, col = "gray")
legend("topleft", legend = c("Mean", "Median"), col = c("blue", "red"), lwd = 2)
grid()

```
#Comment the plot
#The sensitivity curve of the mean increases linearly with z, indicating that the mean is affected by any new value, even a single extreme outlier. In contrast, the sensitivity curve of the median is flat for most values of z, and only changes when z is extreme enough to shift the middle order statistics. This shows that the median is much more robust than the mean.












